---
import { createDehydratedRouter, createPageRoutesFromGlob } from "../lib/routing/server";
import SPA from "../lib/SPA.astro";

export type Props = {
  title: string
}

const { title } = Astro.props

const router = await createDehydratedRouter(Astro, { routes: () => createPageRoutesFromGlob(Astro.glob('../pages/examples/**/*.astro')) })

const isHome = Astro.url.pathname === '/examples'
---
<html>
  <head>
    <meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>
  <body class="bg-slate-100 p-4 md:p-8">
    <SPA router={router} class="w-full min-h-screen gap-4 flex flex-col items-center h-full">
      <section class="text-center">
        <h1 class="font-bold text-xl">Astro SPA</h1>
        <h2 class="font-bold text-md text-slate-600">Examples and code samples</h2>
      </section>
      <div class="flex flex-col gap-2 w-full max-w-prose bg-slate-50 border border-slate-200 p-4 rounded-xl shadow-md">
        <section class="flex flex-col gap-2">
          {!isHome && (
            <nav class="flex flex-row gap-2 text-slate-500 hover:text-slate-400">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18" />
              </svg>
              <a href="/examples">Back to list</a>
            </nav>)}
          <h3 class="font-bold text-lg">{title}</h3>
        </section>
        <slot />
      </div>
    </SPA>
  </body>
</html>