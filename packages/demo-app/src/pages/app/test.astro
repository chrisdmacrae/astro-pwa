---
import { z } from "astro:content"
import { useForm } from 'astro-pwa';
import AppLayout from "../../layouts/AppLayout.astro";
import Card from "../../components/Cards/Card.astro";
import TestForm from '../../components/Forms/TestForm.astro';

const form = await useForm('test', { astro: Astro, fields: z.object({
  test: z.string(),
  email: z.string().email()
}) })

if (form.submitting) {
    return await form.submit(data => console.log(data))
}
---
<AppLayout title="Form example">
  <div class="w-full h-16 p-4 bg-white shadow-md">
    sdfhdfshkj
  </div>

  <Card variant="featured">
    <h2 class="font-bold text-xl text-gray-700 flex gap-2 items-center">
      Welcome to the example server form page
    </h2>
    <p>This form submits </p>

    <TestForm form={form} />
  </Card>
</AppLayout>